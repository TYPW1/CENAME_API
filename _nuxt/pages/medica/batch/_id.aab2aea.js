(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{201:function(t,e,n){"use strict";var r={name:"Checkbox",props:["checked","label"],data:function(){return{isChecked:!1}},methods:{toggle:function(){this.isChecked=!this.isChecked,this.$emit("toggle"),console.log(this.isChecked),this.isChecked?this.$emit("checked"):this.$emit("unchecked")}},watch:{checked:function(t){this.isChecked=t}},created:function(){this.isChecked=this.checked}},o=n(2),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"flex focus:outline-none",on:{click:t.toggle}},[t.isChecked?n("span",{staticClass:"mdi mdi-checkbox-marked"}):t._e(),t._v(" "),t.isChecked?t._e():n("span",{staticClass:"mdi mdi-checkbox-blank-outline"}),t._v(" "),t.label?n("span",{staticClass:"ml-2 whitespace-no-wrap"},[t._v(t._s(t.label))]):t._e()])}),[],!1,null,"03c2929c",null);e.a=component.exports},202:function(t,e,n){"use strict";n(21),n(22),n(18),n(10),n(196),n(34),n(33),n(42),n(55),n(17);var r=n(201),o={components:{Checkbox:r.a},props:["orders","data","checkable","checked"],data:function(){return{selected:!1}},watch:{checked:function(t){this.selected=t}},mounted:function(){this.selected=this.checked}},c=n(2),l=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{staticClass:" hover:bg-gray-100 border-t cursor-pointer",class:{"bg-gray-100":t.selected}},[t.checkable?n("td",[n("Checkbox",{attrs:{checked:t.selected},on:{checked:function(e){t.selected=!0},unchecked:function(e){t.selected=!1}}})],1):t._e(),t._v(" "),t._l(t.orders,(function(e,r){return n("td",{key:r,staticClass:"text-xs py-2 text-center py-4",on:{click:function(e){return t.$emit("click")}}},[t._v("\n    "+t._s(t.data[e])+"\n  ")])}))],2)}),[],!1,null,null,null).exports,d={components:{Checkbox:r.a,InvoiceTableData:l},props:{column:Array,hidden:Array,data:{type:Array,default:[]},checkable:Boolean,data_url:String,data_id:String,no_add:Boolean,no_delete:Boolean,no_check:Boolean},data:function(){return{myData:[],searchInput:"",hiddenField:[],filterMenuShown:!1,downSorted:[],upSorted:[],checkAll:!1}},computed:{orders:function(){var t=this;return this.column.map((function(t){return t.json?t.json:t.name})).filter((function(e){return!t.hiddenField.includes(e)}))},names:function(){var t=this;return this.column.filter((function(e){return!t.hiddenField.includes(e.json?e.json:e.name)})).map((function(t){return t.name}))},searchData:function(){var t=this;return this.searchInput?this.myData.filter((function(e){return Array.from(Object.values(e)).filter((function(e){return null==e?void 0:e.toString().toLowerCase().includes(t.searchInput.toLowerCase())})).length})):this.myData}},watch:{data:function(t){this.myData=Array.from(t)}},mounted:function(){this.selected=this.checked,this.myData=Array.from(this.data),this.hidden&&(this.hiddenField=this.hidden.map((function(t){return t.json?t.json:t.name})))},methods:{sortBy:function(t){this.downSorted.includes(t)?(this.downSorted=this.downSorted.filter((function(e){return e!==t})),this.upSorted.push(t),this.myData.sort((function(a,b){return a[t]>b[t]?1:-1}))):(this.upSorted=this.upSorted.filter((function(e){return e!==t})),this.downSorted.push(t),this.myData.sort((function(a,b){return a[t]<b[t]?1:-1})))},navigate:function(t){console.log("Goto"),this.$router.push({path:this.data_url+t[this.data_id]})}}},h=Object(c.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"w-full "},[t._m(0),t._v(" "),n("div",{staticClass:"w-full bg-white px-8  mt-4 flex justify-end border-b"},[n("div",{staticClass:"flex flex-grow items-center text-gray-500"},[n("p",{staticClass:"text-gray-700 font-medium "},[t._v("INFO :")]),t._v(" "),n("p",{staticClass:"ml-1"},[n("span",{staticClass:"text-green-500"},[t._v(t._s(t.searchData.length))]),t._v(" items\n          shown out of "+t._s(t.data.length)+"\n        ")]),t._v(" "),n("div",{staticClass:" bg-white mx-auto flex rounded-full overflow-hidden p-1 px-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],staticClass:"flex-grow outline-none border px-4",attrs:{type:"text",placeholder:"Fast search here"},domProps:{value:t.searchInput},on:{input:function(e){e.target.composing||(t.searchInput=e.target.value)}}}),t._v(" "),n("button",{staticClass:"mdi mdi-magnify text-green-500 outline-none bg-gray-200 px-4",on:{click:function(e){return t.$emit("search-click")}}})])]),t._v(" "),n("div",{staticClass:"flex text-sm text-gray-600"},[t.no_add?t._e():n("button",{staticClass:"border-r p-1 py-2 rounded",on:{click:function(e){return t.$emit("add-click")}}},[n("span",{staticClass:"mdi mdi-plus text-green-500"}),t._v(" Add New\n        ")]),t._v(" "),t.no_add||t.no_delete?t._e():n("button",{staticClass:"border-r p-1 py-2 rounded"},[n("span",{staticClass:"mdi mdi-delete text-red-500"}),t._v(" Delete Selected\n        ")]),t._v(" "),t.checkable?n("button",{staticClass:"border-r p-1 py-2 rounded",on:{click:function(e){t.checkAll=!0}}},[t._v("\n          Check All\n        ")]):t._e(),t._v(" "),n("div",{staticClass:"relative flex items-center ml-4"},[n("button",{staticClass:"mdi mdi-dots-vertical text-xl",on:{click:function(e){t.filterMenuShown=!0}}}),t._v(" "),t.filterMenuShown?n("div",{staticClass:"fixed inset-0 bg-black opacity-25 z-30",on:{click:function(e){t.filterMenuShown=!1}}}):t._e(),t._v(" "),t.filterMenuShown?n("div",{staticClass:"bg-white flex flex-col absolute top-0 mt-8 right-0 py-2 -mr-4 shadow-lg rounded-lg z-40"},t._l(t.column,(function(e,r){return n("Checkbox",{key:r,staticClass:"p-4 py-2 border-b",attrs:{label:e.name,checked:!t.hiddenField.includes(e.json?e.json:e.name)},on:{unchecked:function(n){return t.hiddenField.push(e.json?e.json:e.name)},checked:function(n){t.hiddenField=t.hiddenField.filter((function(t){return t!==(e.json?e.json:e.name)}))}}})})),1):t._e()])])]),t._v(" "),n("div",{staticClass:"w-full bg-white flex flex-col"},[n("table",{staticClass:"w-full  table-fixed text-gray-700 table-auto "},[n("tr",[t.checkable?n("th",{staticClass:"w-8"}):t._e(),t._v(" "),t._l(t.names,(function(e,r){return n("th",{key:r},[n("button",{staticClass:"whitespace-no-wrap font-medium capitalize text-sm truncate",on:{click:function(n){return t.sortBy(e)}}},[t._v("\n              "+t._s(e)+"\n              "),t.upSorted.includes(e)?n("span",{staticClass:"mdi mdi-sort-ascending text-blue-500"}):t._e(),t.downSorted.includes(e)?n("span",{staticClass:"mdi mdi-sort-descending text-purple-500"}):t._e()])])}))],2),t._v(" "),t._l(t.searchData,(function(e,r){return n("InvoiceTableData",{key:r+e,attrs:{checkable:t.checkable,checked:t.checkAll,orders:t.orders,data:e},on:{click:function(n){return t.navigate(e)}}})}))],2),t._v(" "),t.searchData.length?t._e():n("div",{staticClass:"flex p-8 text-3xl uppercase text-gray-600 justify-center w-full"},[t._v("\n        No Data Available\n      ")])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-3/4 hidden bg-white mx-auto flex rounded-full overflow-hidden p-4 px-8 text-3xl"},[e("input",{staticClass:"flex-grow outline-none",attrs:{type:"text",placeholder:"Fast search here"}}),this._v(" "),e("button",{staticClass:"mdi mdi-magnify text-green-500 outline-none"})])}],!1,null,null,null);e.a=h.exports},203:function(t,e,n){"use strict";n(126),n(17),n(127);var r={name:"CustomSelect",props:["value","label","placeholder","data"],data:function(){return{displayData:!1,text:""}},computed:{searchData:function(){return this.data}},mounted:function(){var t,e=this;this.text=null===(t=this.data.find((function(t){return t.value===e.value})))||void 0===t?void 0:t.label},methods:{toggleData:function(){this.displayData=!this.displayData},select:function(t){var label=t.label,e=t.value;this.text=label,this.displayData=!1,this.$emit("input",e)}}},o=n(2),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"relative z-20 "},[n("div",{staticClass:"flex items-center"},[t.label?n("label",{staticClass:"w-2/12 uppercase"},[t._v(t._s(t.label))]):t._e(),t._v(" "),n("div",{staticClass:"flex flex-grow border rounded items-center overflow-hidden ml-4"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:" focus:outline-none p-2 flex-grow ",attrs:{readonly:"",type:"text",placeholder:t.placeholder||t.label},domProps:{value:t.text},on:{input:[function(e){e.target.composing||(t.text=e.target.value)},function(e){t.displayData=!0}],click:t.toggleData}}),t._v(" "),n("button",{staticClass:"mdi mdi-menu-down focus:outline-none p-2",on:{click:t.toggleData}})])]),t._v(" "),t.displayData?n("div",{staticClass:"absolute bg-white shadow-lg rounded-lg w-full  right-0 flex flex-col"},t._l(t.searchData,(function(e){return n("button",{key:e.value,staticClass:"py-2 hover:bg-blue-300 focus:bg-blue-300 focus:outline-none",on:{click:function(n){return t.select(e)}}},[t._v("\n        "+t._s(e.label)+"\n      ")])})),0):t._e()]),t._v(" "),t.displayData?n("div",{staticClass:"top-0 left-0 bottom-0 right-0 z-10 ",staticStyle:{position:"fixed"},on:{click:function(e){t.displayData=!1}}}):t._e()])}),[],!1,null,"78e3a2b2",null);e.a=component.exports},340:function(t,e,n){"use strict";n(41),n(19),n(18),n(10),n(35);var r=n(15);n(75);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var l={name:"NewBatch",props:["readonly","value","is_new"],data:function(){return{batch:{}}},computed:{get_total:function(){return this.batch.quantity*this.batch.num_of_ships}},methods:{update:function(t,e){this.$emit("input",c(c({},this.value),{},Object(r.a)({},t,e)))}}},d=n(2),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"border-t"},[t.readonly?t._e():n("div",{staticClass:"self-end text-red-500 text-right text-xl outline-none border-none"},[n("button",{staticClass:"mdi mdi-close outline-none border-none",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase",attrs:{for:"delivery"}},[t._v("Description of goods")]),t._v(" "),n("textarea",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"good_desc",readonly:t.readonly,type:"text",name:"delivery",placeholder:"Description of goods",rows:"2"},domProps:{value:t.value.description},on:{input:function(e){return t.update("description",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase",attrs:{for:"exporter"}},[t._v("Batch Number")]),t._v(" "),n("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"batch_number",readonly:!t.is_new,type:"text",name:"exporter",placeholder:"Batch Number",required:""},domProps:{value:t.value.batch_no},on:{input:function(e){return t.update("batch_no",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase",attrs:{for:"stockage"}},[t._v("Quantity / Ship per pack")]),t._v(" "),n("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"quantity_ship",readonly:t.readonly,type:"number",name:"stockage",placeholder:"Stockage"},domProps:{value:t.value.quantity},on:{input:function(e){return t.update("quantity",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase",attrs:{for:"vessel"}},[t._v("N° of ships")]),t._v(" "),n("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"number_ship",readonly:t.readonly,type:"number",name:"vessel",placeholder:"Number of Ships"},domProps:{value:t.value.num_of_ships},on:{input:function(e){return t.update("num_of_ships",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center hidden"},[n("label",{staticClass:"w-2/12 uppercase",attrs:{for:"vessel"}},[t._v("Total Quantity (packs)")]),t._v(" "),n("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"total",type:"number",name:"vessel",readonly:""},domProps:{value:t.get_total}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase"},[t._v("Manufactured Date")]),t._v(" "),n("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:t.readonly,type:"date",placeholder:"Manufactured Date "},domProps:{value:t.value.mfg_date},on:{input:function(e){return t.update("mfg_date",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase",attrs:{for:"date"}},[t._v("Expiration Date")]),t._v(" "),n("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:t.readonly,type:"date",name:"date",placeholder:"Expiration Date "},domProps:{value:t.value.exp_date},on:{input:function(e){return t.update("exp_date",e.target.value)}}})])])}),[],!1,null,"fbb30a06",null);e.a=component.exports},351:function(t,e,n){"use strict";n(17),n(127);var r={name:"Select",props:["value","label","placeholder"],data:function(){return{displayData:!1,regions:[{name:"Adamawa",code:"ADA"},{name:"North",code:"NOR"},{name:"South",code:"SOU"},{name:"East",code:"EAS"},{name:"Centre",code:"CEN"},{name:"Littoral",code:"LIT"},{name:"West",code:"WES"},{name:"Far North",code:"FNO"},{name:"North West",code:"NWE"},{name:"South West",code:"SWE"}],text:""}},computed:{searchData:function(){return this.regions}},methods:{toggleData:function(){this.displayData=!this.displayData},select:function(t){var e=t.name,code=t.code;this.text=e,this.displayData=!1,this.$emit("input",code)}}},o=n(2),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"relative z-20 "},[n("div",{staticClass:"flex items-center"},[t.label?n("label",{staticClass:"w-2/12 uppercase"},[t._v(t._s(t.label))]):t._e(),t._v(" "),n("div",{staticClass:"flex flex-grow border rounded items-center overflow-hidden"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:" focus:outline-none p-2 flex-grow",attrs:{readonly:"",type:"text",placeholder:t.placeholder||t.label},domProps:{value:t.text},on:{input:[function(e){e.target.composing||(t.text=e.target.value)},function(e){t.displayData=!0}],click:t.toggleData}}),t._v(" "),n("button",{staticClass:"mdi mdi-heart focus:outline-none p-2",on:{click:t.toggleData}})])]),t._v(" "),t.displayData?n("div",{staticClass:"absolute bg-white shadow-lg rounded-lg w-10/12  right-0 flex flex-col"},t._l(t.searchData,(function(e){return n("button",{key:e.code,staticClass:"py-2 hover:bg-blue-300 focus:bg-blue-300 focus:outline-none",on:{click:function(n){return t.select(e)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),0):t._e()]),t._v(" "),t.displayData?n("div",{staticClass:"top-0 left-0 bottom-0 right-0 z-10 ",staticStyle:{position:"fixed"},on:{click:function(e){t.displayData=!1}}}):t._e()])}),[],!1,null,"6b69ec6c",null);e.a=component.exports},352:function(t,e,n){"use strict";var r={name:"SeeBatch",props:["batch","linked"],computed:{get_total:function(){return this.batch.quantity*this.batch.num_of_ships},readonly:function(){return!0}}},o=n(2),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"border-t"},[n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase",attrs:{for:"delivery"}},[t._v("Description of goods")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.batch.description,expression:"batch.description"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"good_desc",readonly:t.readonly,type:"text",name:"delivery",placeholder:"Description of goods",rows:"2"},domProps:{value:t.batch.description},on:{input:function(e){e.target.composing||t.$set(t.batch,"description",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase",attrs:{for:"exporter"}},[t._v("Batch Number")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.batch.batch_no,expression:"batch.batch_no"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"batch_number",readonly:t.readonly,type:"text",name:"exporter",placeholder:"Exporter"},domProps:{value:t.batch.batch_no},on:{input:function(e){e.target.composing||t.$set(t.batch,"batch_no",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase",attrs:{for:"stockage"}},[t._v("Quantity / Ship per pack")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.batch.quantity,expression:"batch.quantity"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"quantity_ship",readonly:t.readonly,type:"text",name:"stockage",placeholder:"Stockage"},domProps:{value:t.batch.quantity},on:{input:function(e){e.target.composing||t.$set(t.batch,"quantity",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase"},[t._v("N° of ships")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.batch.num_of_ships,expression:"batch.num_of_ships"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"number_ship",readonly:t.readonly,type:"text",name:"vessel",placeholder:"Number of Ships"},domProps:{value:t.batch.num_of_ships},on:{input:function(e){e.target.composing||t.$set(t.batch,"num_of_ships",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase"},[t._v("Total Quantity (packs)")]),t._v(" "),n("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"total",type:"text",name:"vessel",readonly:""},domProps:{value:t.get_total}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase"},[t._v("Remaining Quantity")]),t._v(" "),n("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:t.readonly,type:"text",placeholder:"Expired Date (date de facture) "},domProps:{value:t.get_total-(t.batch.distributed_quantity||0)}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase"},[t._v("Quantity distributed")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.batch.distributed_quantity||"Not yet distributed",expression:"batch.distributed_quantity || 'Not yet distributed'"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:t.readonly,type:"text",placeholder:"Expired Date (date de facture) "},domProps:{value:t.batch.distributed_quantity||"Not yet distributed"},on:{input:function(e){e.target.composing||t.$set(t.batch,"distributed_quantity || 'Not yet distributed'",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase",attrs:{f:""}},[t._v("Number of distributions")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.batch.distributions_count||"Not yet distributed",expression:"batch.distributions_count || 'Not yet distributed'"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:t.readonly,type:"text",placeholder:"Expired Date (date de facture) "},domProps:{value:t.batch.distributions_count||"Not yet distributed"},on:{input:function(e){e.target.composing||t.$set(t.batch,"distributions_count || 'Not yet distributed'",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase"},[t._v("Manufactured Date")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.batch.mfg_date,expression:"batch.mfg_date"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:t.readonly,type:"text",placeholder:"Manufactured Date (date de facture) "},domProps:{value:t.batch.mfg_date},on:{input:function(e){e.target.composing||t.$set(t.batch,"mfg_date",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[n("label",{staticClass:"w-2/12 uppercase",attrs:{for:"date"}},[t._v("Expiration Date")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.batch.exp_date,expression:"batch.exp_date"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:t.readonly,type:"text",placeholder:"Expired Date (date de facture) "},domProps:{value:t.batch.exp_date},on:{input:function(e){e.target.composing||t.$set(t.batch,"exp_date",e.target.value)}}})]),t._v(" "),t.linked?n("div",{staticClass:"mt-4 justify-end flex w-full"},[n("nuxt-link",{staticClass:"px-8 py-2 ml-4 border rounded-lg bg-green-500 text-white",attrs:{to:"/medica/batch/"+t.batch.batch_no}},[t._v("\n      See "),n("span",{staticClass:"mdi mdi-share"})])],1):t._e()])}),[],!1,null,"4138f66a",null);e.a=component.exports},376:function(t,e,n){"use strict";n.r(e);n(41),n(19),n(18),n(10),n(35);var r=n(32),o=(n(198),n(126),n(17),n(36),n(4)),c=n(15),l=(n(34),n(33),n(340)),d=n(351),h=n(352),m=n(75),f=n(203);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var x={components:{InvoiceTable:n(202).a,CustomSelect:f.a,SeeBatch:h.a,Select:d.a,NewBatch:l.a},layout:"medica",data:function(){return{editMode:!1,editButtonText:"Edit",editButtonIcon:"mdi-pencil",updatedBatch:{},transfer_region:"",quantity:"0",sending:!1,deleting:!1,showTransfer:!1,shouldUpdate:!1}},computed:{regions:function(){return Array.from(this.$store.state.invoice.regions).slice(1)},batch:function(){return _(_({},this.$store.getters["invoice/getBatch"](this.$route.params.id)),{},{distributions:this.$store.getters["invoice/getDistributionOfBatch"](this.$route.params.id)})},host:function(){return this.$store.state.invoice.host}},watch:{updatedBatch:function(t,e){if(this.editMode&&JSON.stringify(t)!==JSON.stringify(this.batch))return this.shouldUpdate=!0,this.editButtonIcon="mdi-send",this.editButtonText="Save",!0;this.editMode&&JSON.stringify(t)===JSON.stringify(this.batch)?(this.shouldUpdate=!1,this.editButtonIcon="mdi-cancel",this.editButtonText="Cancel"):this.editMode||(this.shouldUpdate=!1,this.editButtonIcon="mdi-pencil",this.editButtonText="Edit")}},beforeMount:function(){},methods:{getBatch:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Getting batch");try{t.batch=t.$store.getters["invoice/getBatch"](t.$route.params.id)}catch(t){console.log(t)}return e.prev=2,e.next=5,t.$axios.get("".concat(t.host,"/get/batch/").concat(t.$route.params.id));case 5:(data=(data=e.sent).data).distributions_count=data.distributions.length,data.distributions=data.distributions.map((function(e){return _(_({},e),{},{region:t.regions.find((function(t){return t.code===e.region_code})).name.toUpperCase(),created_on:Object(m.formatDate)(e.created_on)})})),data.distributed_quantity=data.distributions.length>0?data.distributions.map((function(t){return t.quantity})).reduce((function(a,b){return a+b})):0,t.batch=data,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),alert(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})))()},transfer:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.transfer_region){e.next=4;break}alertify.alert("Missing data","Region is required"),e.next=30;break;case 4:if(Number(t.quantity)){e.next=8;break}alertify.alert("Invalid quantity","Invalid quantity entered"),e.next=30;break;case 8:return t.sending=!0,n={region_code:t.transfer_region,batch_no:t.batch.batch_no,quantity:Number(t.quantity)},e.prev=10,e.next=13,t.$axios.$post("".concat(t.host,"/make/distribution"),n);case 13:o=e.sent,console.log(o),console.log("BAtch"),console.log(t.batch),c=_(_({},t.batch),{},{distributions_count:t.batch.distributions_count+1,distributed_quantity:t.batch.distributed_quantity+Number(n.quantity),distributions:[].concat(Object(r.a)(t.batch.distributions),[_(_({},n),{},{created_on:new Date})])}),t.$store.commit("invoice/updateBatch",_({},c)),t.$store.commit("invoice/addDistribution",_({},n)),alertify.success("Transfered Successfully"),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),alertify.success("Could not transfer batch at this time");case 26:return e.prev=26,t.sending=!1,t.showTransfer=!1,e.finish(26);case 30:case"end":return e.stop()}}),e,null,[[10,23,26,30]])})))()},deleteBatch:function(){var t=this;alertify.confirm("Batch Delete","Do you really want to delete? \n THIS IS NOT REVERSIBLE",Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.deleting=!0,e.prev=1,e.next=4,t.$axios.$delete("".concat(t.host,"/delete/batch/").concat(t.batch.batch_no));case 4:n=e.sent,t.$store.commit("invoice/deleteBatch",t.batch),alertify.success("Batch deleted."),t.$router.push({path:"/medica/batch"}),console.log(n),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),alertify.error("Could not delete batch at this time");case 15:return e.prev=15,t.deleting=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,11,15,18]])}))),null)},update:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.sending=!0,n=_(_({},t.updatedBatch),{},{mfg_date:Object(m.convertToDate)(new Date(t.updatedBatch.mfg_date)),exp_date:Object(m.convertToDate)(new Date(t.updatedBatch.exp_date))}),e.prev=2,console.log("Updating batch"),console.log(n),e.next=7,t.$axios.$put("".concat(t.host,"/update/batch"),_(_({},n),{},{mfg_date:Object(m.convertToDate)(n.mfg_date),exp_date:Object(m.convertToDate)(n.exp_date)}));case 7:r=e.sent,console.log(r),t.$store.commit("invoice/updateBatch",n),alertify.success("Batch updated successfully"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),alertify.error("Could not update batch");case 16:return e.prev=16,t.sending=!1,t.showTransfer=!1,t.shouldUpdate=!1,t.editMode=!1,t.editButtonText="Edit",t.editButtonIcon="mdi-pencil",e.finish(16);case 24:case"end":return e.stop()}}),e,null,[[2,13,16,24]])})))()},editClicked:function(){this.editMode?this.shouldUpdate?(this.update(),console.log("ok")):(this.editMode=!1,this.editButtonText="Edit",this.editButtonIcon="mdi-pencil"):(this.updatedBatch=this.batch,this.editMode=!0,this.editButtonIcon="mdi-cancel",this.editButtonText="Cancel")}}},y=n(2),component=Object(y.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.batch?n("div",[n("div",{staticClass:"bg-white flex flex-col"},[!t.editMode&&t.batch?n("SeeBatch",{staticClass:"mt-2",attrs:{batch:t.batch,readonly:!0},on:{close:function(e){t.invoice.batches=t.invoice.batches.filter((function(b,i){return i!==t.index}))}},model:{value:t.batch.description,callback:function(e){t.$set(t.batch,"description",e)},expression:"batch.description"}}):t._e(),t._v(" "),t.editMode&&t.batch?n("NewBatch",{staticClass:"mt-2",on:{close:function(e){t.editMode=!1}},model:{value:t.updatedBatch,callback:function(e){t.updatedBatch=e},expression:"updatedBatch"}}):t._e(),t._v(" "),n("div",{staticClass:"flex justify-end p-8"},[t.batch.quantity*t.batch.num_of_ships-t.batch.distributed_quantity?n("button",{staticClass:"px-8 rounded-lg py-2 text-white bg-green-500",on:{click:function(e){t.showTransfer=!0}}},[t._v("\n        Transfer to "),n("span",{staticClass:"mdi mdi-share"})]):t._e(),t._v(" "),n("button",{staticClass:"px-8 rounded-lg py-2 text-white bg-green-500 mx-2",on:{click:t.editClicked}},[t._v("\n        "+t._s(t.sending&&t.shouldUpdate?"Updating...":t.editButtonText)+"\n        "),n("span",{staticClass:"mdi",class:t.editButtonIcon})]),t._v(" "),n("button",{staticClass:"px-8 py-2 border rounded-lg mx-2 bg-red-500 text-white",attrs:{disabled:t.sending},on:{click:function(e){return e.preventDefault(),t.deleteBatch(e)}}},[t._v("\n        "+t._s(t.deleting?"Deleting...":"Delete")+"\n        "),n("span",{staticClass:"mdi mdi-delete"})])]),t._v(" "),n("div",{staticClass:"border-t border gray-500 h-px"}),t._v(" "),n("p",{staticClass:"mt-4 text-xl font-bold"},[t._v("Distributions")]),t._v(" "),t.batch?n("InvoiceTable",{staticClass:"mb-16",attrs:{data_url:"/medica/regions/",data_id:"region_code",no_add:"true",column:[{name:"Region°",json:"region"},{name:"Quantity distributed",json:"quantity"},{name:"Distribution Date",json:"created_on"}],data:t.batch.distributions},on:{"add-click":t.addInvoice}}):t._e()],1),t._v(" "),t.showTransfer?n("div",{staticClass:"bg-gray-500 fixed opacity-25 inset-0"}):t._e(),t._v(" "),t.showTransfer?n("div",{staticClass:"w-3/5 bg-white flex flex-col fixed rounded-lg p-8 top-0 mt-8",staticStyle:{left:"50%",transform:"translate(-50%)"}},[n("p",{staticClass:"font-bold text-2xl self-center"},[t._v("Transfer Batch to")]),t._v(" "),n("CustomSelect",{staticClass:"mt-4 px-8 text-sm",attrs:{data:t.regions.map((function(t){return{label:t.name.toUpperCase(),value:t.code}})),label:"region"},model:{value:t.transfer_region,callback:function(e){t.transfer_region=e},expression:"transfer_region"}}),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center "},[n("label",{staticClass:"w-2/12 uppercase"},[t._v("Quantity (Max :\n        "+t._s(t.batch.quantity*t.batch.num_of_ships-t.batch.distributed_quantity)+")")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"total",type:"number",min:"1",max:t.batch.quantity*t.batch.num_of_ships-t.batch.distributed_quantity,name:"quantity"},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-4 px-8 text-sm flex items-center justify-end"},[n("button",{staticClass:"px-8 py-2 border rounded-lg bg-green-500 text-white",attrs:{disabled:t.sending},on:{click:function(e){return e.preventDefault(),t.transfer(e)}}},[t._v("\n        "+t._s(t.sending?"Sending...":"Transfer")+"\n        "),n("span",{staticClass:"mdi mdi-transfer"})]),t._v(" "),n("button",{staticClass:"px-8 py-2 ml-4 border rounded-lg bg-green-500 text-white",attrs:{disabled:t.sending},on:{click:function(e){e.preventDefault(),t.showTransfer=!1}}},[t._v("\n        Close "),n("span",{staticClass:"mdi mdi-cancel"})])])],1):t._e()]):t._e()}),[],!1,null,"4b26b55c",null);e.default=component.exports}}]);