(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{340:function(e,t,r){"use strict";r(41),r(19),r(18),r(10),r(35);var n=r(15);r(75);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var l={name:"NewBatch",props:["readonly","value","is_new"],data:function(){return{batch:{}}},computed:{get_total:function(){return this.batch.quantity*this.batch.num_of_ships}},methods:{update:function(e,t){this.$emit("input",c(c({},this.value),{},Object(n.a)({},e,t)))}}},d=r(2),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"border-t"},[e.readonly?e._e():r("div",{staticClass:"self-end text-red-500 text-right text-xl outline-none border-none"},[r("button",{staticClass:"mdi mdi-close outline-none border-none",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"delivery"}},[e._v("Description of goods")]),e._v(" "),r("textarea",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"good_desc",readonly:e.readonly,type:"text",name:"delivery",placeholder:"Description of goods",rows:"2"},domProps:{value:e.value.description},on:{input:function(t){return e.update("description",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"exporter"}},[e._v("Batch Number")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"batch_number",readonly:!e.is_new,type:"text",name:"exporter",placeholder:"Batch Number",required:""},domProps:{value:e.value.batch_no},on:{input:function(t){return e.update("batch_no",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"stockage"}},[e._v("Quantity / Ship per pack")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"quantity_ship",readonly:e.readonly,type:"number",name:"stockage",placeholder:"Stockage"},domProps:{value:e.value.quantity},on:{input:function(t){return e.update("quantity",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"vessel"}},[e._v("N° of ships")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"number_ship",readonly:e.readonly,type:"number",name:"vessel",placeholder:"Number of Ships"},domProps:{value:e.value.num_of_ships},on:{input:function(t){return e.update("num_of_ships",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center hidden"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"vessel"}},[e._v("Total Quantity (packs)")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"total",type:"number",name:"vessel",readonly:""},domProps:{value:e.get_total}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase"},[e._v("Manufactured Date")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:e.readonly,type:"date",placeholder:"Manufactured Date "},domProps:{value:e.value.mfg_date},on:{input:function(t){return e.update("mfg_date",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"date"}},[e._v("Expiration Date")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:e.readonly,type:"date",name:"date",placeholder:"Expiration Date "},domProps:{value:e.value.exp_date},on:{input:function(t){return e.update("exp_date",t.target.value)}}})])])}),[],!1,null,"fbb30a06",null);t.a=component.exports},352:function(e,t,r){"use strict";var n={name:"SeeBatch",props:["batch","linked"],computed:{get_total:function(){return this.batch.quantity*this.batch.num_of_ships},readonly:function(){return!0}}},o=r(2),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"border-t"},[r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"delivery"}},[e._v("Description of goods")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.batch.description,expression:"batch.description"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"good_desc",readonly:e.readonly,type:"text",name:"delivery",placeholder:"Description of goods",rows:"2"},domProps:{value:e.batch.description},on:{input:function(t){t.target.composing||e.$set(e.batch,"description",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"exporter"}},[e._v("Batch Number")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.batch.batch_no,expression:"batch.batch_no"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"batch_number",readonly:e.readonly,type:"text",name:"exporter",placeholder:"Exporter"},domProps:{value:e.batch.batch_no},on:{input:function(t){t.target.composing||e.$set(e.batch,"batch_no",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"stockage"}},[e._v("Quantity / Ship per pack")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.batch.quantity,expression:"batch.quantity"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"quantity_ship",readonly:e.readonly,type:"text",name:"stockage",placeholder:"Stockage"},domProps:{value:e.batch.quantity},on:{input:function(t){t.target.composing||e.$set(e.batch,"quantity",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase"},[e._v("N° of ships")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.batch.num_of_ships,expression:"batch.num_of_ships"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"number_ship",readonly:e.readonly,type:"text",name:"vessel",placeholder:"Number of Ships"},domProps:{value:e.batch.num_of_ships},on:{input:function(t){t.target.composing||e.$set(e.batch,"num_of_ships",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase"},[e._v("Total Quantity (packs)")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"total",type:"text",name:"vessel",readonly:""},domProps:{value:e.get_total}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase"},[e._v("Remaining Quantity")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:e.readonly,type:"text",placeholder:"Expired Date (date de facture) "},domProps:{value:e.get_total-(e.batch.distributed_quantity||0)}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase"},[e._v("Quantity distributed")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.batch.distributed_quantity||"Not yet distributed",expression:"batch.distributed_quantity || 'Not yet distributed'"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:e.readonly,type:"text",placeholder:"Expired Date (date de facture) "},domProps:{value:e.batch.distributed_quantity||"Not yet distributed"},on:{input:function(t){t.target.composing||e.$set(e.batch,"distributed_quantity || 'Not yet distributed'",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{f:""}},[e._v("Number of distributions")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.batch.distributions_count||"Not yet distributed",expression:"batch.distributions_count || 'Not yet distributed'"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:e.readonly,type:"text",placeholder:"Expired Date (date de facture) "},domProps:{value:e.batch.distributions_count||"Not yet distributed"},on:{input:function(t){t.target.composing||e.$set(e.batch,"distributions_count || 'Not yet distributed'",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase"},[e._v("Manufactured Date")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.batch.mfg_date,expression:"batch.mfg_date"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:e.readonly,type:"text",placeholder:"Manufactured Date (date de facture) "},domProps:{value:e.batch.mfg_date},on:{input:function(t){t.target.composing||e.$set(e.batch,"mfg_date",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"date"}},[e._v("Expiration Date")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.batch.exp_date,expression:"batch.exp_date"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:e.readonly,type:"text",placeholder:"Expired Date (date de facture) "},domProps:{value:e.batch.exp_date},on:{input:function(t){t.target.composing||e.$set(e.batch,"exp_date",t.target.value)}}})]),e._v(" "),e.linked?r("div",{staticClass:"mt-4 justify-end flex w-full"},[r("nuxt-link",{staticClass:"px-8 py-2 ml-4 border rounded-lg bg-green-500 text-white",attrs:{to:"/medica/batch/"+e.batch.batch_no}},[e._v("\n      See "),r("span",{staticClass:"mdi mdi-share"})])],1):e._e()])}),[],!1,null,"4138f66a",null);t.a=component.exports},377:function(e,t,r){"use strict";r.r(t);r(41),r(19),r(18),r(10),r(35),r(36);var n=r(4),o=r(15),c=r(340),l=r(352),d=r(75);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={name:"New",components:{SeeBatch:l.a,NewBatch:c.a},layout:"medica",data:function(){return{sending:!1,deleting:!1,editActive:!1,invoice_number:this.$route.params.id,updatedInvoice:{}}},computed:{get_total:function(){return this.updated.ship*this.invoice.pack},host:function(){return this.$store.state.invoice.host},invoice:function(){return this.$store.getters["invoice/getInvoice"](this.$route.params.id)||{}}},watch:{invoice:function(e,t){this.updatedInvoice=m({},e)}},mounted:function(){this.updatedInvoice=m({},this.invoice)},methods:{deleteInvoice:function(){var e=this;alertify.confirm("Invoice Delete","Do you really want to delete? \n THIS IS NOT REVERSIBLE",Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.deleting=!0,t.prev=1,t.next=4,e.$axios.$delete("".concat(e.host,"/delete/invoice/").concat(e.invoice.invoice_no));case 4:r=t.sent,e.$store.commit("invoice/deleteInvoice",e.invoice),alertify.success("Invoice deleted."),e.$router.push({path:"/medica/invoice"}),console.log(r),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0),alertify.error("Could not delete invoice at this time");case 15:return t.prev=15,e.deleting=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,11,15,18]])}))),null)},fetchSomething:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.editActive||JSON.stringify(e.updatedInvoice)===JSON.stringify(e.invoice)){t.next=21;break}return e.sending=!0,r=m(m({},new d.Invoice(m(m({},e.updatedInvoice),{},{invoice_info:null})).invoice_info),{},{invoice_date:Object(d.convertToDate)(e.updatedInvoice.invoice_date)}),t.prev=3,t.next=6,e.$axios.$put("".concat(e.host,"/update/invoice"),r);case 6:n=t.sent,e.ip=n,e.$store.commit("invoice/updateInvoice",r),alertify.success("invoice updated successfully"),console.log(n),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0),alertify.error("Could not update invoice");case 17:return t.prev=17,e.sending=!1,e.editActive=!1,t.finish(17);case 21:case"end":return t.stop()}}),t,null,[[3,13,17,21]])})))()},addBatch:function(){this.invoice.batches.push({description:"",batch_no:"",quantity:0,num_of_ships:0,mfg_date:Date(),exp_date:Date()})}}},x=r(2),component=Object(x.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"p-4 flex flex-col",on:{keypress:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}},[r("p",{staticClass:"text-4xl font-bold text-gray-800 self-center"},[e._v("See Invoice")]),e._v(" "),r("div",{staticClass:"flex flex-col w-5/6 mx-auto shadow-lg mt-4 bg-white px-4 pb-4"},[r("p",{staticClass:"text-2xl text-medium border-b p-2 py-4"},[e._v("Invoice Information")]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"delivery"}},[e._v("Place of Delivery")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.updatedInvoice.delivery,expression:"updatedInvoice.delivery"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"delivery",readonly:!e.editActive,type:"text",name:"delivery",placeholder:"Place of Delivery"},domProps:{value:e.updatedInvoice.delivery},on:{input:function(t){t.target.composing||e.$set(e.updatedInvoice,"delivery",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"exporter"}},[e._v("Exporter")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.updatedInvoice.exporter,expression:"updatedInvoice.exporter"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"exporter",readonly:!e.editActive,type:"text",name:"exporter",placeholder:"Exporter"},domProps:{value:e.updatedInvoice.exporter},on:{input:function(t){t.target.composing||e.$set(e.updatedInvoice,"exporter",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"stockage"}},[e._v("Stockage")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.updatedInvoice.stockage,expression:"updatedInvoice.stockage"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"stockage",readonly:!e.editActive,type:"text",name:"stockage",placeholder:"Stockage"},domProps:{value:e.updatedInvoice.stockage},on:{input:function(t){t.target.composing||e.$set(e.updatedInvoice,"stockage",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"vessel"}},[e._v("Vessel")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.updatedInvoice.vessel,expression:"updatedInvoice.vessel"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"vessel",readonly:!e.editActive,type:"text",name:"vessel",placeholder:"Vessel"},domProps:{value:e.updatedInvoice.vessel},on:{input:function(t){t.target.composing||e.$set(e.updatedInvoice,"vessel",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"date"}},[e._v("Invoice Date")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.updatedInvoice.invoice_date,expression:"updatedInvoice.invoice_date"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"date",readonly:!e.editActive,type:"date",name:"date",placeholder:"Invoice Date (date de facture) "},domProps:{value:e.updatedInvoice.invoice_date},on:{input:function(t){t.target.composing||e.$set(e.updatedInvoice,"invoice_date",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"date"}},[e._v("Invoice Number")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.updatedInvoice.invoice_no,expression:"updatedInvoice.invoice_no"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"invoice_number",readonly:!0,type:"text",name:"invoice_number",placeholder:"Invoice Number (numero de facture) "},domProps:{value:e.updatedInvoice.invoice_no},on:{input:function(t){t.target.composing||e.$set(e.updatedInvoice,"invoice_no",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"flex mt-4 justify-end"},[r("button",{staticClass:"px-8 py-2 border rounded-lg bg-green-500 text-white",attrs:{disabled:e.sending},on:{click:function(t){return t.preventDefault(),e.fetchSomething(t)}}},[e._v("\n        "+e._s(e.sending?"Saving ...":"Save")+"\n        "),e.sending?e._e():r("span",{staticClass:"mdi mdi-cloud-upload"})]),e._v(" "),e.editActive?e._e():r("button",{staticClass:"px-8 py-2 border rounded-lg bg-green-500 text-white mx-2",attrs:{disabled:e.sending},on:{click:function(t){t.preventDefault(),e.editActive=!0}}},[e._v("\n        Edit "),r("span",{staticClass:"mdi mdi-pencil"})]),e._v(" "),e.editActive?e._e():r("button",{staticClass:"px-8 py-2 border rounded-lg bg-red-500 text-white mx-2",attrs:{disabled:e.sending},on:{click:function(t){return t.preventDefault(),e.deleteInvoice(t)}}},[e._v("\n        "+e._s(e.deleting?"Deleting...":"Delete")+"\n        "),r("span",{staticClass:"mdi mdi-delete"})]),e._v(" "),e.editActive?r("button",{staticClass:"px-8 py-2 border rounded-lg bg-green-500 text-white",attrs:{disabled:e.sending},on:{click:function(t){t.preventDefault(),e.editActive=!1}}},[e._v("\n        Cancel "),r("span",{staticClass:"mdi mdi-cancel"})]):e._e()])]),e._v(" "),r("div",{staticClass:"flex flex-col w-5/6 mx-auto shadow-lg mt-4 bg-white px-4 pb-4"},[r("p",{staticClass:"text-2xl text-medium  px-2 mt-4"},[e._v("Batch")]),e._v(" "),e._l(e.invoice.batches,(function(t,n){return r("SeeBatch",{key:n,staticClass:"mt-2",attrs:{linked:"true",batch:t,readonly:!e.editActive},on:{close:function(t){e.invoice.batches=e.invoice.batches.filter((function(b,i){return i!==n}))}}})}))],2)])}),[],!1,null,"341cfe1a",null);t.default=component.exports}}]);