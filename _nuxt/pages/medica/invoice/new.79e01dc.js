(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{340:function(e,t,r){"use strict";r(41),r(19),r(18),r(10),r(35);var n=r(15);r(75);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var l={name:"NewBatch",props:["readonly","value","is_new"],data:function(){return{batch:{}}},computed:{get_total:function(){return this.batch.quantity*this.batch.num_of_ships}},methods:{update:function(e,t){this.$emit("input",c(c({},this.value),{},Object(n.a)({},e,t)))}}},d=r(2),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"border-t"},[e.readonly?e._e():r("div",{staticClass:"self-end text-red-500 text-right text-xl outline-none border-none"},[r("button",{staticClass:"mdi mdi-close outline-none border-none",attrs:{type:"button"},on:{click:function(t){return e.$emit("close")}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"delivery"}},[e._v("Description of goods")]),e._v(" "),r("textarea",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"good_desc",readonly:e.readonly,type:"text",name:"delivery",placeholder:"Description of goods",rows:"2"},domProps:{value:e.value.description},on:{input:function(t){return e.update("description",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"exporter"}},[e._v("Batch Number")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"batch_number",readonly:!e.is_new,type:"text",name:"exporter",placeholder:"Batch Number",required:""},domProps:{value:e.value.batch_no},on:{input:function(t){return e.update("batch_no",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"stockage"}},[e._v("Quantity / Ship per pack")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"quantity_ship",readonly:e.readonly,type:"number",name:"stockage",placeholder:"Stockage"},domProps:{value:e.value.quantity},on:{input:function(t){return e.update("quantity",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"vessel"}},[e._v("NÂ° of ships")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"number_ship",readonly:e.readonly,type:"number",name:"vessel",placeholder:"Number of Ships"},domProps:{value:e.value.num_of_ships},on:{input:function(t){return e.update("num_of_ships",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center hidden"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"vessel"}},[e._v("Total Quantity (packs)")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"total",type:"number",name:"vessel",readonly:""},domProps:{value:e.get_total}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase"},[e._v("Manufactured Date")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:e.readonly,type:"date",placeholder:"Manufactured Date "},domProps:{value:e.value.mfg_date},on:{input:function(t){return e.update("mfg_date",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"date"}},[e._v("Expiration Date")]),e._v(" "),r("input",{staticClass:"w-full border rounded p-2 ml-8",attrs:{readonly:e.readonly,type:"date",name:"date",placeholder:"Expiration Date "},domProps:{value:e.value.exp_date},on:{input:function(t){return e.update("exp_date",t.target.value)}}})])])}),[],!1,null,"fbb30a06",null);t.a=component.exports},374:function(e,t,r){"use strict";r.r(t);r(41),r(35),r(18),r(37),r(19),r(34),r(33),r(17),r(21),r(22),r(10),r(198),r(36);var n=r(4),o=r(15),c=r(340),l=r(75);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function m(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var x={name:"New",components:{NewBatch:c.a},layout:"medica",data:function(){var e;return{sending:!1,invoice:(e={delivery:"",exporter:"",stockage:"",vessel:"",invoice_date:"2020-04-01"},Object(o.a)(e,"delivery",""),Object(o.a)(e,"exporter",""),Object(o.a)(e,"stockage",""),Object(o.a)(e,"vessel",""),Object(o.a)(e,"invoice_no",""),e),batches:[]}},computed:{get_total:function(){return this.invoice.ship*this.invoice.pack},host:function(){return this.$store.state.invoice.host}},mounted:function(){this.addBatch()},methods:{fetchSomething:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.invoice.invoice_no){t.next=3;break}return alertify.alert("Missing data","Please an invoice number is needed to proceed"),t.abrupt("return");case 3:e.sending=!0,t.prev=4,n=m(e.batches),t.prev=6,n.s();case 8:if((o=n.n()).done){t.next=18;break}if((r=o.value).batch_no){t.next=13;break}return alertify.alert("Missing data","Please a batch number is needed for every batch"),t.abrupt("return");case 13:console.log(r.mfg_date),r.mfg_date=Object(l.convertToDate)(r.mfg_date),r.exp_date=Object(l.convertToDate)(r.exp_date);case 16:t.next=8;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(6),n.e(t.t0);case 23:return t.prev=23,n.f(),t.finish(23);case 26:return t.next=28,e.$axios.$post("".concat(e.host,"/add/invoice"),{invoice_data:v(v({},e.invoice),{},{invoice_date:Object(l.convertToDate)(e.invoice.invoice_date)}),batches:e.batches.map((function(e){return v(v({},e),{},{quantity:Number(e.quantity),num_of_ships:Number(e.num_of_ships)})}))});case 28:c=t.sent,e.ip=c,e.$store.commit("invoice/add",new l.Invoice(v(v({},e.invoice),{},{batches:e.batches}))),alertify.confirm("Added successfully","Invoice added Successfully, Do you wish to add another ?",(function(){e.invoice={delivery:"",exporter:"",stockage:"",vessel:"",invoice_date:"2020-04-01",invoice_no:""},e.batches=[]}),(function(){e.$router.push("/medica/invoice")})),console.log(c),t.next=39;break;case 35:t.prev=35,t.t1=t.catch(4),console.log(t.t1),alertify.error("Could not add invoice, Please try again");case 39:return t.prev=39,e.sending=!1,t.finish(39);case 42:case"end":return t.stop()}}),t,null,[[4,35,39,42],[6,20,23,26]])})))()},addBatch:function(){this.batches.push({description:"",batch_no:"",quantity:0,num_of_ships:0,mfg_date:"2020-11-11",exp_date:"2021-11-11"})}}},_=r(2),component=Object(_.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"p-4 flex flex-col",on:{keypress:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}},[r("p",{staticClass:"text-4xl font-bold text-gray-800 self-center"},[e._v("New Invoice")]),e._v(" "),r("div",{staticClass:"flex flex-col w-5/6 mx-auto shadow-lg mt-4 bg-white px-4 pb-4"},[r("p",{staticClass:"text-2xl text-medium border-b p-2 py-4"},[e._v("Invoice Information")]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"delivery"}},[e._v("Place of Delivery")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.invoice.delivery,expression:"invoice.delivery"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"delivery",type:"text",name:"delivery",placeholder:"Place of Delivery"},domProps:{value:e.invoice.delivery},on:{input:function(t){t.target.composing||e.$set(e.invoice,"delivery",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"exporter"}},[e._v("Exporter")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.invoice.exporter,expression:"invoice.exporter"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"exporter",type:"text",name:"exporter",placeholder:"Exporter"},domProps:{value:e.invoice.exporter},on:{input:function(t){t.target.composing||e.$set(e.invoice,"exporter",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"stockage"}},[e._v("Stockage")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.invoice.stockage,expression:"invoice.stockage"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"stockage",type:"text",name:"stockage",placeholder:"Stockage"},domProps:{value:e.invoice.stockage},on:{input:function(t){t.target.composing||e.$set(e.invoice,"stockage",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"vessel"}},[e._v("Vessel")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.invoice.vessel,expression:"invoice.vessel"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"vessel",type:"text",name:"vessel",placeholder:"Vessel"},domProps:{value:e.invoice.vessel},on:{input:function(t){t.target.composing||e.$set(e.invoice,"vessel",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"date"}},[e._v("Invoice Date")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.invoice.invoice_date,expression:"invoice.invoice_date"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"date",type:"date",name:"date",placeholder:"Invoice Date (date de facture) "},domProps:{value:e.invoice.invoice_date},on:{input:function(t){t.target.composing||e.$set(e.invoice,"invoice_date",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mt-4 px-8 text-sm flex items-center"},[r("label",{staticClass:"w-2/12 uppercase",attrs:{for:"date"}},[e._v("Invoice Number")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.invoice.invoice_no,expression:"invoice.invoice_no"}],staticClass:"w-full border rounded p-2 ml-8",attrs:{id:"invoice_number",type:"text",name:"invoice_number",required:"",placeholder:"Invoice Number (numero de facture) "},domProps:{value:e.invoice.invoice_no},on:{input:function(t){t.target.composing||e.$set(e.invoice,"invoice_no",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"flex flex-col w-5/6 mx-auto shadow-lg mt-4 bg-white px-4 pb-4"},[r("p",{staticClass:"text-2xl text-medium  px-2 mt-4"},[e._v("Batch")]),e._v(" "),e._l(e.batches,(function(t,n){return r("NewBatch",{key:n,staticClass:"mt-2",attrs:{is_new:!0},on:{close:function(t){e.batches=e.batches.filter((function(b,i){return i!==n}))}},model:{value:e.batches[n],callback:function(t){e.$set(e.batches,n,t)},expression:"batches[index]"}})})),e._v(" "),r("div",{staticClass:"mt-8 w-full flex justify-end"},[r("button",{staticClass:"px-8 py-2 rounded-lg border border-green-500 text-green-500 bg-white",attrs:{type:"button"},on:{click:e.addBatch}},[e._v("\n        Add New Batch\n      ")])])],2),e._v(" "),r("div",{staticClass:"flex mt-4 justify-end"},[r("button",{staticClass:"px-8 py-2 border rounded-lg bg-green-500 text-white",attrs:{disabled:e.sending},on:{click:function(t){return t.preventDefault(),e.fetchSomething(t)}}},[e._v("\n      "+e._s(e.sending?"Saving ...":"Save")+"\n      "),e.sending?e._e():r("span",{staticClass:"mdi mdi-cloud-upload"})]),e._v(" "),r("button",{staticClass:"px-8 py-2 border rounded-lg bg-green-500 text-white mx-4",attrs:{type:"reset",disabled:e.sending}},[e._v("\n      Reset "),r("span",{staticClass:"mdi mdi-restore"})]),e._v(" "),r("button",{staticClass:"px-8 py-2 border rounded-lg bg-green-500 text-white",attrs:{disabled:e.sending},on:{click:function(t){return t.preventDefault(),e.$router.back()}}},[e._v("\n      Close "),r("span",{staticClass:"mdi mdi-cancel"})])])])}),[],!1,null,"97a5f0b2",null);t.default=component.exports}}]);